import time, threading, cv2
import numpy as np

FPS: int = 10
SPF: float = 1. / FPS

class Viewer:
    def __init__(self, name):
        self.name = name
        self.event_thread = threading.Thread(self._read_img)
    def __enter__(self):
        pass

    def __exit__(self, exc_type, exc_val, exc_tb):
        pass

    def _read_from(self, stream: Generator[np.ndarray]):
        start = time.perf_counter()
        time_since = 0
        for img in stream:
            # Max of 10 fps
            time.sleep(SPF)
            time_since = time.perf_counter() - start
            if time_since>=1.:
                start = time.perf_counter()
                time_since = 0

